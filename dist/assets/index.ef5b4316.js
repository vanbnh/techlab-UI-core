import{r as u,a as n,j as e,p as m,a3 as N,a4 as I,k as L,a5 as C,a6 as S,a7 as E,A as O,a8 as P,L as _,a9 as k,aa as $,ab as D,ac as H,ad as M,ae as R,af as U,K as V,ag as W,ah as q,ai as G,aj as K,ak as F}from"./index.d52c8096.js";import{E as X,a as Y,u as J,b as Q,g as Z,c as ee,H as se,d as ae,e as re,A as ne,X as te}from"./App.c6f4b6cc.js";import{u as oe,C as z}from"./index.esm.493de783.js";function le(s,t){if(s==null)return{};var o=ie(s,t),i,r;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(r=0;r<c.length;r++)i=c[r],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,i)||(o[i]=s[i]))}return o}function ie(s,t){if(s==null)return{};var o={},i=Object.keys(s),r,c;for(c=0;c<i.length;c++)r=i[c],!(t.indexOf(r)>=0)&&(o[r]=s[r]);return o}var j=u.exports.forwardRef(function(s,t){var o=s.color,i=o===void 0?"currentColor":o,r=s.size,c=r===void 0?24:r,h=le(s,["color","size"]);return n("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...h,children:[e("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),e("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),e("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),e("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),e("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})});j.propTypes={color:m.exports.string,size:m.exports.oneOfType([m.exports.string,m.exports.number])};j.displayName="Coffee";const ce=j,B=u.exports.forwardRef((s,t)=>{const{label:o,hideIcon:i,showIcon:r,visible:c,className:h,htmlFor:p,placeholder:v,iconSize:f,inputClassName:g,invalid:y,...w}=s,[b,l]=u.exports.useState(c),d=()=>{const a=f||14;return b===!1?i||e(X,{size:a}):r||e(Y,{size:a})};return n(u.exports.Fragment,{children:[o?e(N,{className:"form-label",for:p,children:o}):null,n(I,{className:L({[h]:h,"is-invalid":y}),children:[e(C,{ref:t,invalid:y,type:b===!1?"password":"text",placeholder:v||"\xB7\xB7\xB7\xB7\xB7\xB7\xB7\xB7\xB7\xB7\xB7\xB7",className:L({[g]:g}),...o&&p?{id:p}:{},...w}),e(S,{className:"cursor-pointer",onClick:()=>l(!b),children:d()})]})]})});B.propTypes={invalid:m.exports.bool,hideIcon:m.exports.node,showIcon:m.exports.node,visible:m.exports.bool,className:m.exports.string,placeholder:m.exports.string,iconSize:m.exports.number,inputClassName:m.exports.string,label(s,t){if(s[t]&&s.htmlFor==="undefined")throw new Error("htmlFor prop is required when label prop is present")},htmlFor(s,t){if(s[t]&&s.label==="undefined")throw new Error("label prop is required when htmlFor prop is present")}};B.defaultProps={visible:!1};const me="/assets/login-v2.f073f8a2.svg",de="/assets/login-v2-dark.28044871.svg";const T=ae(),pe=({t:s,name:t,role:o})=>n("div",{className:"d-flex",children:[e("div",{className:"me-1",children:e(ne,{size:"sm",color:"success",icon:e(ce,{size:12})})}),n("div",{className:"d-flex flex-column",children:[n("div",{className:"d-flex justify-content-between",children:[e("h6",{children:t}),e(te,{size:12,className:"cursor-pointer",onClick:()=>F.dismiss(s.id)})]}),n("span",{children:["You have successfully logged in as an ",o," user to ",T,". Now you can start to explore. Enjoy!"]})]})]}),ue={username:"opetech_1",password:"6BMEf8HnbrDA8v7"},xe=()=>{const{skin:s}=J(),t=Q(),o=E(),i=u.exports.useContext(O),{control:r,setError:c,handleSubmit:h,formState:{errors:p}}=oe({defaultValues:ue}),[v,f]=u.exports.useState(!1),[g,y]=u.exports.useState(null);u.exports.useEffect(()=>{g&&o(Z(g.role))},[g]);const w=s==="dark"?de:me,b=l=>{if(Object.values(l).every(d=>d.length>0))f(!0),G.login({username:l.username,password:l.password}).then(d=>{const a=d.data,x={role:"admin",fullName:(a==null?void 0:a.first_name)&&(a==null?void 0:a.last_name)?`${a==null?void 0:a.first_name} ${a==null?void 0:a.last_name}`:(a==null?void 0:a.username)||"Admin",avatar:re(),ability:[{action:"manage",subject:"all"}],accessToken:a.access,refreshToken:a.refresh};t(K(x)),i.update(x.ability),f(!1),y(x),F(A=>e(pe,{t:A,role:l.role||"admin",name:l.fullName||l.username||"Admin"}))}).catch(d=>{var a,x;console.log(d),f(!1),c("username",{type:"manual",message:(x=(a=d.response)==null?void 0:a.data)==null?void 0:x.error})});else for(const d in l)l[d].length===0&&c(d,{type:"manual"})};return e("div",{className:"auth-wrapper auth-cover",children:n(P,{className:"auth-inner m-0",children:[e(_,{className:"brand-logo",to:"/",onClick:l=>l.preventDefault(),children:e("img",{className:"img-fluid",width:"300",src:ee()})}),e(k,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:e("img",{className:"img-fluid",src:w,alt:"Login Cover"})})}),e(k,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:n(k,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[n($,{tag:"h2",className:"fw-bold mb-1",children:["Welcome to ",T,"! \u{1F44B}"]}),e(D,{className:"mb-2",children:"Please sign-in to your account and start the adventure"}),n(H,{color:"primary",children:[e("div",{className:"alert-body font-small-2",children:e("p",{children:n("small",{className:"me-50",children:[e("span",{className:"fw-bold",children:"Client:"})," opetech_1 | 6BMEf8HnbrDA8v7"]})})}),e(se,{id:"login-tip",className:"position-absolute",size:18,style:{top:"10px",right:"10px"}}),e(M,{target:"login-tip",placement:"left",children:"This is just for ACL demo purpose."})]}),n(R,{className:"auth-login-form mt-2",onSubmit:h(b),children:[n("div",{className:"mb-1",children:[e(N,{className:"form-label",for:"login-email",children:"Username"}),e(z,{id:"username",name:"username",control:r,render:({field:l})=>e(C,{autoFocus:!0,placeholder:"Username",invalid:p.username&&!0,...l})}),p.username&&e(U,{children:p.username.message})]}),n("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(N,{className:"form-label",for:"login-password",children:"Password"})}),e(z,{id:"password",name:"password",control:r,render:({field:l})=>e(B,{className:"input-group-merge",invalid:p.password&&!0,...l})})]}),n("div",{className:"form-check mb-1",children:[e(C,{type:"checkbox",id:"remember-me"}),e(N,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(V,{type:"submit",color:"primary",block:!0,children:v?n(W,{children:[e(q,{color:"white",size:"sm"}),e("span",{className:"ms-50",children:"Loading..."})]}):"Sign in"})]})]})})]})})};export{xe as default};
