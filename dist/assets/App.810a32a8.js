import{r as i,_ as d,u as g,g as f,a as m,j as n,N as w,B as l,b as _,c as v,d as y,h as k}from"./index.3dcf88af.js";function u(t){this.message=t}u.prototype=new Error,u.prototype.name="InvalidCharacterError";var h=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new u("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,s=0,p="";o=e.charAt(s++);~o&&(r=a%4?64*r+o:o,a++%4)?p+=String.fromCharCode(255&r>>(-2*a&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return p};function E(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(h(r).replace(/(.)/g,function(o,a){var s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return h(e)}}function c(t){this.message=t}function b(t,e){if(typeof t!="string")throw new c("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(E(t.split(".")[r]))}catch(o){throw new c("Invalid token specified: "+o.message)}}c.prototype=new Error,c.prototype.name="InvalidTokenError";const I=i.exports.lazy(()=>d(()=>import("./index.03cdec47.js"),["assets/index.03cdec47.js","assets/index.3dcf88af.js","assets/index.82323eca.css","assets/index.esm.ee94c2fb.js","assets/index.29160ca7.css"])),R=i.exports.lazy(()=>d(()=>import("./index.1a9d7af3.js"),["assets/index.1a9d7af3.js","assets/index.3dcf88af.js","assets/index.82323eca.css"])),x=i.exports.lazy(()=>d(()=>import("./index.a78558ba.js"),["assets/index.a78558ba.js","assets/index.3dcf88af.js","assets/index.82323eca.css"])),T=()=>{const{layout:t}=g(),e=f(t);return m([{path:"/",index:!0,element:n(w,{replace:!0,to:(()=>{const a=_();return a?v(a.role):"/login"})()})},{path:"/login",element:n(l,{}),children:[{path:"/login",element:n(I,{})}]},{path:"/auth/not-auth",element:n(l,{}),children:[{path:"/auth/not-auth",element:n(x,{})}]},{path:"*",element:n(l,{}),children:[{path:"*",element:n(R,{})}]},...e])},A=()=>{const t=y(),e=localStorage.getItem("refreshToken");return i.exports.useEffect(()=>{e&&b(e).exp*1e3<new Date().getTime()&&t(k())},[e]),n(i.exports.Suspense,{fallback:null,children:n(T,{})})};export{A as default};
