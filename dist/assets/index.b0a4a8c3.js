import{r as d,a as P,j as e,p as J,a7 as et,K as pe,a8 as tt,a9 as Ne,ar as be,an as Oe,aa as Ee,as as Re,a5 as Ue,bj as Pe,a3 as Le,a0 as nt,q as at,z as rt,bh as st,ag as it,bk as ot,bl as Ie,L as lt,bm as ct,a1 as pt,bn as ut}from"./index.d52c8096.js";import{D as Ve,M as dt,q as gt,C as fe,R as mt,a as we,L as Be,r as De,s as Fe,t as Me,G as ft,d as ht,S as vt,e as bt,u as Ct,v as xt,I as yt,V as kt,g as Nt,T as Pt,h as Lt,i as wt,j as St,k as Ot,w as Et,x as Rt,l as Tt,m as jt,E as At,y as _t,o as zt,p as It,z as $e,A as We,B as Se,F as Ge}from"./index.6caec6e1.js";import{X as Bt,j as He,s as Dt,S as Ft}from"./App.c6f4b6cc.js";import{u as Mt}from"./useQuery.c29b86ee.js";import{L as $t}from"./Loading.ebef6fa5.js";import{S as Wt}from"./SelectField.53fd7b53.js";function Gt(t,p){if(t==null)return{};var a=Ht(t,p),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(p.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(a[i]=t[i]))}return a}function Ht(t,p){if(t==null)return{};var a={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(p.indexOf(r)>=0)&&(a[r]=t[r]);return a}var Te=d.exports.forwardRef(function(t,p){var a=t.color,i=a===void 0?"currentColor":a,r=t.size,s=r===void 0?24:r,A=Gt(t,["color","size"]);return P("svg",{ref:p,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...A,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"8 12 12 16 16 12"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"16"})]})});Te.propTypes={color:J.exports.string,size:J.exports.oneOfType([J.exports.string,J.exports.number])};Te.displayName="ArrowDownCircle";const Ut=Te;function Vt(t,p){if(t==null)return{};var a=qt(t,p),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(p.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(a[i]=t[i]))}return a}function qt(t,p){if(t==null)return{};var a={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(p.indexOf(r)>=0)&&(a[r]=t[r]);return a}var je=d.exports.forwardRef(function(t,p){var a=t.color,i=a===void 0?"currentColor":a,r=t.size,s=r===void 0?24:r,A=Vt(t,["color","size"]);return P("svg",{ref:p,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...A,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"16 12 12 8 8 12"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"8"})]})});je.propTypes={color:J.exports.string,size:J.exports.oneOfType([J.exports.string,J.exports.number])};je.displayName="ArrowUpCircle";const Jt=je;function Kt(t,p){if(t==null)return{};var a=Zt(t,p),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(p.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(a[i]=t[i]))}return a}function Zt(t,p){if(t==null)return{};var a={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(p.indexOf(r)>=0)&&(a[r]=t[r]);return a}var Ae=d.exports.forwardRef(function(t,p){var a=t.color,i=a===void 0?"currentColor":a,r=t.size,s=r===void 0?24:r,A=Kt(t,["color","size"]);return P("svg",{ref:p,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...A,children:[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})]})});Ae.propTypes={color:J.exports.string,size:J.exports.oneOfType([J.exports.string,J.exports.number])};Ae.displayName="Save";const Yt=Ae;function Xt(t,p){if(t==null)return{};var a=Qt(t,p),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(p.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(a[i]=t[i]))}return a}function Qt(t,p){if(t==null)return{};var a={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(p.indexOf(r)>=0)&&(a[r]=t[r]);return a}var _e=d.exports.forwardRef(function(t,p){var a=t.color,i=a===void 0?"currentColor":a,r=t.size,s=r===void 0?24:r,A=Xt(t,["color","size"]);return P("svg",{ref:p,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...A,children:[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})});_e.propTypes={color:J.exports.string,size:J.exports.oneOfType([J.exports.string,J.exports.number])};_e.displayName="Trash";const en=_e,tn=({value:t,row:p,column:a})=>{const i=et(),r=a.validLink!==void 0?a.validLink(p):!0;return e("button",{type:"button",onClick:()=>r&&i(a.to(p)),className:`${r?"cursor-pointer text-decoration-underline text-primary":""} border-0 bg-transparent`,children:t})},nn=t=>e(Ve,{formatterComponent:tn,...t}),an=["equal","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual"],rn=({value:t,onValueChange:p})=>e("input",{className:"form-control text-right",type:"number",placeholder:"Filter...",value:t===void 0?"":t,min:0,onChange:i=>{const{value:r}=i.target;if(r.trim()===""){p();return}p(parseInt(r,10))}}),sn=t=>e(Ve,{availableFilterOperations:an,editorComponent:rn,...t}),de=(t,p,a)=>{let i={};const r=localStorage.getItem(t);r?i={...JSON.parse(r),[p]:a}:i={...i,[p]:a},localStorage.setItem(t,JSON.stringify(i))},ce=(t,p,a=[])=>{const i=localStorage.getItem(t);if(i){const r=JSON.parse(i);if(r&&r[p])return Array.isArray(r[p])&&r[p].length===0?a:r[p]}return a},on=t=>t.reduce((p,a)=>a.summaries&&a.summaries.length>0?[...p,...a.summaries.map(i=>({columnName:a.name,type:i}))]:p,[]),ln=(t,p)=>{const a={left:[],right:[]},i=p.map(s=>s.name),r=Math.round(p.length/2);return t.forEach(s=>{i.indexOf(s)+1<r?a.left.push(s):a.right.push(s)}),a},cn=({values:t,setValues:p,options:a})=>P(be,{children:[e(Oe,{className:"pb-1",children:e(Ee,{children:"Permissions"})}),e(Re,{children:e(Wt,{placeholder:"Select permissions ...",isMulti:!0,value:t,options:a,isClearable:!1,onChange:i=>p(i)})})]}),pn=({pageSizeValues:t,setPageSizeValues:p})=>{const[a,i]=d.exports.useState(-1),[r,s]=d.exports.useState(-1),[A,v]=d.exports.useState(""),y=o=>{s(t[o]),i(o)},T=()=>{s(-1),i(-1),v("")},l=()=>{i(t.length),s(t[t.length-1]*2)},Z=()=>{const o=[...t];a===t.length?o.push(r):o[a]=r,p(o.map(N=>+N)),T()},W=()=>{const o=[...t];o.splice(a,1),p(o),T()};return d.exports.useEffect(()=>{let o="";if(a===0&&t.length>1){const N=t[1];r>=N&&(o=`The value must be less than ${N}`)}if(a>0&&a<t.length-1){const N=t[a-1],G=t[a+1];r<=N?o=`The value must be greater than ${N}`:r>=G&&(o=`The value must be less than ${G}`)}if(a===t.length){const N=t[t.length-1];r<=N&&(o=`The value must be greater than ${N}`)}v(o)},[r,a,t]),P(be,{stretch:!0,children:[e(Oe,{className:"pb-1",children:e(Ee,{children:"Pagings"})}),P(Re,{children:[P("div",{className:"d-flex overflow-auto",children:[t.map((o,N)=>e(pe,{outline:a!==N,className:"me-1",color:"primary",onClick:()=>y(N),size:"sm",children:o},o)),e("div",{children:e(pe.Ripple,{className:"btn-icon",color:"primary",onClick:l,children:e(gt,{size:16})})})]}),a>-1&&P("div",{className:"row mt-1",children:[P("div",{className:"col-8 d-flex",children:[e("div",{children:e(Ue,{type:"number",min:0,autoComplete:"custom-page-size-number",value:r,onChange:o=>s(o.target.value)})}),P("div",{className:"d-flex ms-1 mt-25",children:[e("div",{children:e(pe.Ripple,{color:"flat-secondary",className:"btn-icon",size:"sm",onClick:T,children:e(Bt,{size:16})})}),e("div",{children:e(pe.Ripple,{color:"flat-danger",className:"btn-icon",size:"sm",onClick:W,children:e(en,{size:16})})}),e("div",{children:e(pe.Ripple,{color:"flat-success",className:"btn-icon",size:"sm",onClick:Z,children:e(Yt,{size:16})})})]})]}),A&&e("div",{className:"text-danger ms-2",children:A})]})]})]})},un=({customizerValue:t,setCustomizerValue:p,resizingModeValue:a,setResizingModeValue:i,columnDisplayValues:r,setColumnDisplayValues:s,fixedColumnValues:A,setFixedColumnValues:v,columnVisibilities:y,setColumnVisibilities:T,filterCols:l,setFilterCols:Z})=>{const W=k=>{const{name:R,checked:E}=k.target;p(O=>E?[...O,R]:O.filter(j=>j!==R))},o=k=>{i(k.target.value)},N=(k,R)=>s(E=>E.map(O=>O.name===R?{...O,title:k.target.value}:O)),G=(k,R)=>{const{checked:E}=k.target;v(E?O=>[...O,R]:O=>O.filter(j=>j!==R))},Y=(k,R)=>{const{checked:E}=k.target;T(E?O=>O.filter(j=>j!==R):O=>[...O,R])},M=(k,R)=>{const{checked:E}=k.target;Z(E?O=>[...O,R]:O=>O.filter(j=>j!==R))};return P(be,{stretch:!0,children:[e(Oe,{className:"pb-1",children:e(Ee,{children:"Columns"})}),P(Re,{className:"overflow-auto",children:[P(Pe,{children:[e(Le,{className:"fw-bolder",children:"Customizers:"}),P("div",{className:"d-flex gap-2",children:[e(fe,{type:"switch",id:"reordering",label:"Column Reordering",name:"reordering",onChange:W,checked:t.includes("reordering")}),e(fe,{type:"switch",id:"visibility",label:"Column Visibility",name:"visibility",onChange:W,checked:t.includes("visibility")})]})]}),P(Pe,{children:[e(Le,{className:"fw-bolder",children:"Resizing Mode:"}),P("div",{className:"d-flex gap-2",children:[e(fe,{type:"radio",id:"widget",label:"Widget",name:"widget",value:"widget",onChange:o,checked:a==="widget"}),e(fe,{type:"radio",id:"nextColumn",label:"Next Column",name:"nextColumn",value:"nextColumn",onChange:o,checked:a==="nextColumn"})]})]}),P(Pe,{children:[e(Le,{children:"Display:"}),P("table",{className:"table table-responsive table-bordered table-sm table-hover table-setting",children:[e("thead",{children:P("tr",{children:[e("th",{scope:"col",children:"Num"}),e("th",{scope:"col",children:"KEY"}),P("th",{scope:"col",children:["TITLE",e("small",{className:"text-muted ms-1",children:"(can edit)"})]}),e("th",{scope:"col",style:{textAlign:"center"},children:"FIXED"}),e("th",{scope:"col",style:{textAlign:"center"},children:"VISIBILITIES"}),e("th",{scope:"col",style:{textAlign:"center"},children:"FILTERS"})]})}),e(mt,{tag:"tbody",list:r,setList:s,children:r.map((k,R)=>P("tr",{className:"cursor-pointer",children:[e("td",{className:"text-muted",children:R+1}),e("td",{className:"text-muted",children:k.name}),e("td",{className:"input-cell",children:e("input",{name:k.name,type:"text",value:k.title,onChange:E=>N(E,k.name)})}),e("td",{children:e(fe,{type:"checkbox",id:`${k.name}_fixed`,onChange:E=>G(E,k.name),checked:A.includes(k.name),className:"fs-5 ms-5 cursor-pointer"})}),e("td",{className:"text-center",children:e(fe,{type:"checkbox",id:`${k.name}_visibility`,onChange:E=>Y(E,k.name),checked:!y.includes(k.name),className:"fs-5 ms-5 cursor-pointer"})}),e("td",{className:"text-center",children:e(fe,{type:"checkbox",id:`${k.name}_filter`,onChange:E=>M(E,k.name),checked:l.includes(k.name),className:"fs-5 ms-5 cursor-pointer"})})]},k.name))})]})]})]})]})},dn=({setDataSave:t,config:p})=>{const{columns:a,fixedColumns:i,settings:r,hiddenColumnNames:s,filterColumns:A,columnOrders:v,permissions:y,columnCustomizer:T,columnResizingMode:l,pageSizes:Z}=p,W=r.map(h=>({value:h,label:h})),[o,N]=d.exports.useState(W.filter(h=>y.includes(h.value))),[G,Y]=d.exports.useState(Z),[M,k]=d.exports.useState(T),[R,E]=d.exports.useState(l),[O,j]=d.exports.useState(()=>v.map(h=>a.find(ee=>ee.name===h))),[I,H]=d.exports.useState(()=>{let h=[];return i.left&&(h=[...h,...i.left]),i.right&&(h=[...h,...i.right]),h}),[B,re]=d.exports.useState({left:[],right:[]});d.exports.useEffect(()=>{re(ln(I,a))},[I,a]);const[ge,u]=d.exports.useState(s),[f,C]=d.exports.useState(A);return d.exports.useEffect(()=>t({permissions:o.map(h=>h.value),columnCustomizer:M,columnResizingMode:R,columns:O,fixedColumns:B,pageSizes:G,hiddenColumnNames:ge,filterColumns:f}),[o,M,R,O,B,G,ge,f]),P(tt,{children:[e(Ne,{sm:6,xs:12,children:e(cn,{values:o,setValues:N,options:W})}),e(Ne,{sm:6,xs:12,children:e(pn,{pageSizeValues:G,setPageSizeValues:Y})}),e(Ne,{sm:12,children:e(un,{customizerValue:M,setCustomizerValue:k,resizingModeValue:R,setResizingModeValue:E,columnDisplayValues:O,setColumnDisplayValues:j,fixedColumnValues:I,setFixedColumnValues:H,columnVisibilities:ge,setColumnVisibilities:u,filterCols:f,setFilterCols:C})})]})},gn=({isOpen:t,close:p,entries:a,config:i,saveConfig:r})=>{const[s,A]=d.exports.useState({}),v=()=>{r(s),p()};return e(dt,{isOpen:t,toggle:p,title:`Setting ${a}`,size:"xl",scrollable:!0,Body:e(dn,{close:p,setDataSave:A,config:i}),Footer:P("div",{className:"d-flex justify-content-end",children:[e(pe,{color:"primary",className:"me-1",onClick:v,children:"Save"}),e(pe,{color:"secondary",isLight:!0,className:"border-0",onClick:p,children:"Close"})]})})};var qe={exports:{}};(function(t,p){(function(a,i){t.exports=i(d.exports)})(nt,a=>(()=>{var i={703:(v,y,T)=>{var l=T(414);function Z(){}function W(){}W.resetWarningCache=Z,v.exports=function(){function o(Y,M,k,R,E,O){if(O!==l){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}function N(){return o}o.isRequired=o;var G={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:N,element:o,elementType:o,instanceOf:N,node:o,objectOf:N,oneOf:N,oneOfType:N,shape:N,exact:N,checkPropTypes:W,resetWarningCache:Z};return G.PropTypes=G,G}},697:(v,y,T)=>{v.exports=T(703)()},414:v=>{v.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:v=>{v.exports=a}},r={};function s(v){var y=r[v];if(y!==void 0)return y.exports;var T=r[v]={exports:{}};return i[v](T,T.exports,s),T.exports}s.n=v=>{var y=v&&v.__esModule?()=>v.default:()=>v;return s.d(y,{a:y}),y},s.d=(v,y)=>{for(var T in y)s.o(y,T)&&!s.o(v,T)&&Object.defineProperty(v,T,{enumerable:!0,get:y[T]})},s.o=(v,y)=>Object.prototype.hasOwnProperty.call(v,y),s.r=v=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var A={};return(()=>{s.r(A),s.d(A,{default:()=>ge});var v=s(98),y=s.n(v),T=s(697),l=s.n(T);function Z(){return Z=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var C=arguments[f];for(var h in C)Object.prototype.hasOwnProperty.call(C,h)&&(u[h]=C[h])}return u},Z.apply(this,arguments)}var W=function(u){var f=u.pageClassName,C=u.pageLinkClassName,h=u.page,U=u.selected,ee=u.activeClassName,V=u.activeLinkClassName,g=u.getEventListener,n=u.pageSelectedHandler,w=u.href,m=u.extraAriaContext,b=u.pageLabelBuilder,x=u.rel,z=u.ariaLabel||"Page "+h+(m?" "+m:""),$=null;return U&&($="page",z=u.ariaLabel||"Page "+h+" is your current page",f=f!==void 0?f+" "+ee:ee,C!==void 0?V!==void 0&&(C=C+" "+V):C=V),y().createElement("li",{className:f},y().createElement("a",Z({rel:x,role:w?void 0:"button",className:C,href:w,tabIndex:U?"-1":"0","aria-label":z,"aria-current":$,onKeyPress:n},g(n)),b(h)))};W.propTypes={pageSelectedHandler:l().func.isRequired,selected:l().bool.isRequired,pageClassName:l().string,pageLinkClassName:l().string,activeClassName:l().string,activeLinkClassName:l().string,extraAriaContext:l().string,href:l().string,ariaLabel:l().string,page:l().number.isRequired,getEventListener:l().func.isRequired,pageLabelBuilder:l().func.isRequired,rel:l().string};const o=W;function N(){return N=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var C=arguments[f];for(var h in C)Object.prototype.hasOwnProperty.call(C,h)&&(u[h]=C[h])}return u},N.apply(this,arguments)}var G=function(u){var f=u.breakLabel,C=u.breakClassName,h=u.breakLinkClassName,U=u.breakHandler,ee=u.getEventListener,V=C||"break";return y().createElement("li",{className:V},y().createElement("a",N({className:h,role:"button",tabIndex:"0",onKeyPress:U},ee(U)),f))};G.propTypes={breakLabel:l().oneOfType([l().string,l().node]),breakClassName:l().string,breakLinkClassName:l().string,breakHandler:l().func.isRequired,getEventListener:l().func.isRequired};const Y=G;function M(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return u!=null?u:f}function k(u){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},k(u)}function R(){return R=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var C=arguments[f];for(var h in C)Object.prototype.hasOwnProperty.call(C,h)&&(u[h]=C[h])}return u},R.apply(this,arguments)}function E(u,f){for(var C=0;C<f.length;C++){var h=f[C];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}function O(u,f){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,h){return C.__proto__=h,C},O(u,f)}function j(u,f){if(f&&(k(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(u)}function I(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function H(u){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},H(u)}function B(u,f,C){return f in u?Object.defineProperty(u,f,{value:C,enumerable:!0,configurable:!0,writable:!0}):u[f]=C,u}var re=function(u){(function(g,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(n&&n.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),n&&O(g,n)})(V,u);var f,C,h,U,ee=(h=V,U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var g,n=H(h);if(U){var w=H(this).constructor;g=Reflect.construct(n,arguments,w)}else g=n.apply(this,arguments);return j(this,g)});function V(g){var n,w;return function(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}(this,V),B(I(n=ee.call(this,g)),"handlePreviousPage",function(m){var b=n.state.selected;n.handleClick(m,null,b>0?b-1:void 0,{isPrevious:!0})}),B(I(n),"handleNextPage",function(m){var b=n.state.selected,x=n.props.pageCount;n.handleClick(m,null,b<x-1?b+1:void 0,{isNext:!0})}),B(I(n),"handlePageSelected",function(m,b){if(n.state.selected===m)return n.callActiveCallback(m),void n.handleClick(b,null,void 0,{isActive:!0});n.handleClick(b,null,m)}),B(I(n),"handlePageChange",function(m){n.state.selected!==m&&(n.setState({selected:m}),n.callCallback(m))}),B(I(n),"getEventListener",function(m){return B({},n.props.eventListener,m)}),B(I(n),"handleClick",function(m,b,x){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},$=z.isPrevious,X=$!==void 0&&$,ue=z.isNext,me=ue!==void 0&&ue,q=z.isBreak,oe=q!==void 0&&q,te=z.isActive,ne=te!==void 0&&te;m.preventDefault?m.preventDefault():m.returnValue=!1;var S=n.state.selected,Q=n.props.onClick,K=x;if(Q){var _=Q({index:b,selected:S,nextSelectedPage:x,event:m,isPrevious:X,isNext:me,isBreak:oe,isActive:ne});if(_===!1)return;Number.isInteger(_)&&(K=_)}K!==void 0&&n.handlePageChange(K)}),B(I(n),"handleBreakClick",function(m,b){var x=n.state.selected;n.handleClick(b,m,x<m?n.getForwardJump():n.getBackwardJump(),{isBreak:!0})}),B(I(n),"callCallback",function(m){n.props.onPageChange!==void 0&&typeof n.props.onPageChange=="function"&&n.props.onPageChange({selected:m})}),B(I(n),"callActiveCallback",function(m){n.props.onPageActive!==void 0&&typeof n.props.onPageActive=="function"&&n.props.onPageActive({selected:m})}),B(I(n),"getElementPageRel",function(m){var b=n.state.selected,x=n.props,z=x.nextPageRel,$=x.prevPageRel,X=x.selectedPageRel;return b-1===m?$:b===m?X:b+1===m?z:void 0}),B(I(n),"pagination",function(){var m=[],b=n.props,x=b.pageRangeDisplayed,z=b.pageCount,$=b.marginPagesDisplayed,X=b.breakLabel,ue=b.breakClassName,me=b.breakLinkClassName,q=n.state.selected;if(z<=x)for(var oe=0;oe<z;oe++)m.push(n.getPageElement(oe));else{var te=x/2,ne=x-te;q>z-x/2?te=x-(ne=z-q):q<x/2&&(ne=x-(te=q));var S,Q,K=function(ie){return n.getPageElement(ie)},_=[];for(S=0;S<z;S++){var se=S+1;se<=$||se>z-$||S>=q-te&&S<=q+(q===0&&x>1?ne-1:ne)?_.push({type:"page",index:S,display:K(S)}):X&&_.length>0&&_[_.length-1].display!==Q&&(x>0||$>0)&&(Q=y().createElement(Y,{key:S,breakLabel:X,breakClassName:ue,breakLinkClassName:me,breakHandler:n.handleBreakClick.bind(null,S),getEventListener:n.getEventListener}),_.push({type:"break",index:S,display:Q}))}_.forEach(function(ie,ae){var he=ie;ie.type==="break"&&_[ae-1]&&_[ae-1].type==="page"&&_[ae+1]&&_[ae+1].type==="page"&&_[ae+1].index-_[ae-1].index<=2&&(he={type:"page",index:ie.index,display:K(ie.index)}),m.push(he.display)})}return m}),g.initialPage!==void 0&&g.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(g.initialPage,") and forcePage (").concat(g.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),w=g.initialPage?g.initialPage:g.forcePage?g.forcePage:0,n.state={selected:w},n}return f=V,(C=[{key:"componentDidMount",value:function(){var g=this.props,n=g.initialPage,w=g.disableInitialCallback,m=g.extraAriaContext,b=g.pageCount,x=g.forcePage;n===void 0||w||this.callCallback(n),m&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(b)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(b,"). Did you forget a Math.ceil()?")),n!==void 0&&n>b-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(n," > ").concat(b-1,").")),x!==void 0&&x>b-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(x," > ").concat(b-1,")."))}},{key:"componentDidUpdate",value:function(g){this.props.forcePage!==void 0&&this.props.forcePage!==g.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(g.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var g=this.state.selected,n=this.props,w=n.pageCount,m=g+n.pageRangeDisplayed;return m>=w?w-1:m}},{key:"getBackwardJump",value:function(){var g=this.state.selected-this.props.pageRangeDisplayed;return g<0?0:g}},{key:"getElementHref",value:function(g){var n=this.props,w=n.hrefBuilder,m=n.pageCount,b=n.hrefAllControls;if(w)return b||g>=0&&g<m?w(g+1,m,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(g){var n=g===this.state.selected;if(this.props.ariaLabelBuilder&&g>=0&&g<this.props.pageCount){var w=this.props.ariaLabelBuilder(g+1,n);return this.props.extraAriaContext&&!n&&(w=w+" "+this.props.extraAriaContext),w}}},{key:"getPageElement",value:function(g){var n=this.state.selected,w=this.props,m=w.pageClassName,b=w.pageLinkClassName,x=w.activeClassName,z=w.activeLinkClassName,$=w.extraAriaContext,X=w.pageLabelBuilder;return y().createElement(o,{key:g,pageSelectedHandler:this.handlePageSelected.bind(null,g),selected:n===g,rel:this.getElementPageRel(g),pageClassName:m,pageLinkClassName:b,activeClassName:x,activeLinkClassName:z,extraAriaContext:$,href:this.getElementHref(g),ariaLabel:this.ariaLabelBuilder(g),page:g+1,pageLabelBuilder:X,getEventListener:this.getEventListener})}},{key:"render",value:function(){var g=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&g!==void 0)return g&&g(this.props);var n=this.props,w=n.disabledClassName,m=n.disabledLinkClassName,b=n.pageCount,x=n.className,z=n.containerClassName,$=n.previousLabel,X=n.previousClassName,ue=n.previousLinkClassName,me=n.previousAriaLabel,q=n.prevRel,oe=n.nextLabel,te=n.nextClassName,ne=n.nextLinkClassName,S=n.nextAriaLabel,Q=n.nextRel,K=this.state.selected,_=K===0,se=K===b-1,ie="".concat(M(X)).concat(_?" ".concat(M(w)):""),ae="".concat(M(te)).concat(se?" ".concat(M(w)):""),he="".concat(M(ue)).concat(_?" ".concat(M(m)):""),Ce="".concat(M(ne)).concat(se?" ".concat(M(m)):""),xe=_?"true":"false",ye=se?"true":"false";return y().createElement("ul",{className:x||z,role:"navigation","aria-label":"Pagination"},y().createElement("li",{className:ie},y().createElement("a",R({className:he,href:this.getElementHref(K-1),tabIndex:_?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":xe,"aria-label":me,rel:q},this.getEventListener(this.handlePreviousPage)),$)),this.pagination(),y().createElement("li",{className:ae},y().createElement("a",R({className:Ce,href:this.getElementHref(K+1),tabIndex:se?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":ye,"aria-label":S,rel:Q},this.getEventListener(this.handleNextPage)),oe)))}}])&&E(f.prototype,C),Object.defineProperty(f,"prototype",{writable:!1}),V}(v.Component);B(re,"propTypes",{pageCount:l().number.isRequired,pageRangeDisplayed:l().number,marginPagesDisplayed:l().number,previousLabel:l().node,previousAriaLabel:l().string,prevPageRel:l().string,prevRel:l().string,nextLabel:l().node,nextAriaLabel:l().string,nextPageRel:l().string,nextRel:l().string,breakLabel:l().oneOfType([l().string,l().node]),hrefBuilder:l().func,hrefAllControls:l().bool,onPageChange:l().func,onPageActive:l().func,onClick:l().func,initialPage:l().number,forcePage:l().number,disableInitialCallback:l().bool,containerClassName:l().string,className:l().string,pageClassName:l().string,pageLinkClassName:l().string,pageLabelBuilder:l().func,activeClassName:l().string,activeLinkClassName:l().string,previousClassName:l().string,nextClassName:l().string,previousLinkClassName:l().string,nextLinkClassName:l().string,disabledClassName:l().string,disabledLinkClassName:l().string,breakClassName:l().string,breakLinkClassName:l().string,extraAriaContext:l().string,ariaLabelBuilder:l().func,eventListener:l().string,renderOnZeroPageCount:l().func,selectedPageRel:l().string}),B(re,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(u){return u},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const ge=re})(),A})())})(qe);const mn=at(qe.exports),yn=({providerComponents:t=[],TableRowDetailComponent:p,columns:a=[],columnExports:i=[],onExport:r,query:s={key:"",url:"",params:{}},formatData:A,entries:v="data",settings:y=[],fixedCols:T={left:[],right:[]},loading:l=!1})=>{const W=a.filter(c=>c.isGroup).length>0,{pathname:o}=rt(),[N,G]=d.exports.useState([]),[Y,M]=d.exports.useState([]),[k,R]=d.exports.useState(1),[E,O]=d.exports.useState(0),[j,I]=d.exports.useState(10),[H,B]=d.exports.useState([10,20,50,100]),[re,ge]=d.exports.useState([]),[u,f]=d.exports.useState([]),[C,h]=d.exports.useState([]),[U,ee]=d.exports.useState([]),[V,g]=d.exports.useState([]),[n,w]=d.exports.useState("widget"),[m,b]=d.exports.useState(T),[x,z]=d.exports.useState(y),[$,X]=d.exports.useState([]),[ue,me]=d.exports.useState(["reordering","visibility"]),q=d.exports.useRef(null),oe=d.exports.useCallback(c=>{q.current.exportGrid(c)},[q]),te=st(),ne=async c=>{const L={...s.params,page:c+1,limit:j},D=U.map(F=>({key:F.key,value:F.value,expr:F.condition}));return await pt.post(s.url,D,{params:L}).then(F=>F.data)},{data:S,isLoading:Q}=Mt([s.key,{page:E,limit:j,f:U.map(c=>({[c.key]:c.value}))},s.params],()=>ne(E));d.exports.useEffect(()=>{var c;if(S&&S.metadata&&S.metadata.has_next){const L=Number(Math.ceil(((c=S==null?void 0:S.metadata)==null?void 0:c.total)/j));if(E<L){const D=E+1;te.prefetchQuery([s.key,{page:D,limit:j,f:U.map(F=>({[F.key]:F.value}))},s.params],()=>ne(D))}}},[S]),d.exports.useEffect(()=>{var c;if(S!=null&&S.data){let L=S.data.map(F=>({...F,updated_at:F.updated_at&&He(F.updated_at),created_at:F.created_at&&He(F.created_at)}));A&&(L=A(L));const D=((c=S==null?void 0:S.metadata)==null?void 0:c.total_page)||0;G(L),R(D)}},[S]),d.exports.useEffect(()=>{const c=ce(Be,o,a.map(D=>({...D,title:D.title.toUpperCase(),width:D.width||D.title.length*we}))),L=a.map(D=>{const F=c.find(ve=>ve.name===D.name),le={...D,...F};return le.title=le.title.toUpperCase(),le.width=le.width||le.title.length*we,le});M(L)},[a,o]),d.exports.useEffect(()=>{const c=a.map(L=>({title:L.title,width:L.width,name:L.name}));de(Be,o,c)},[a,o]),d.exports.useEffect(()=>{const c=ce($e,o,m);b(c)},[o]),d.exports.useEffect(()=>{de($e,o,m)},[m,o]),d.exports.useEffect(()=>{const c=ce(De,o,a.map(L=>({columnName:L.name,width:L.width||L.title.length*we})));h(c)},[a,o]),d.exports.useEffect(()=>{de(De,o,C)},[C,o]),d.exports.useEffect(()=>{const c=ce(Fe,o,a.map(L=>L.name));f(c)},[a,o]),d.exports.useEffect(()=>{de(Fe,o,u)},[u,o]),d.exports.useEffect(()=>{const c=ce(We,o,10);c!==j&&I(c)},[o]),d.exports.useEffect(()=>{de(We,o,j)},[j,o]),d.exports.useEffect(()=>{if(!H.includes(j)){const L=ce(Se,o,[]).findIndex(D=>D===j);I(L!==-1?H[L]:H[0])}},[H]),d.exports.useEffect(()=>{const c=ce(Se,o,H);B(c)},[o]),d.exports.useEffect(()=>{de(Se,o,H)},[H,o]),d.exports.useEffect(()=>{const c=ce(Ge,o,[]);ee(c)},[o]),d.exports.useEffect(()=>{de(Ge,o,U)},[U,o]),d.exports.useEffect(()=>{const c=ce(Me,o,a.map(L=>L.name));g(c)},[o,a]),d.exports.useEffect(()=>{de(Me,o,V)},[V,o]);const K=x.includes("summary"),_=x.includes("pagination"),se=x.includes("select"),ie=x.includes("reordering"),ae=x.includes("export"),he=x.includes("upload"),Ce=({onToggle:c,buttonRef:L,...D})=>P("div",{className:"d-flex",children:[e("div",{className:"ms-2",children:P("button",{ref:L,className:"btn btn-warning btn-sm",onClick:()=>{if(r)if(re.length>0){const F=N.filter((le,ve)=>re.includes(ve));r(F)}else ut.error("You must select at least one row to export");else c()},...D,children:[e(Ut,{size:16}),e("span",{className:"align-middle ms-25",children:"Export"})]})}),he&&e("div",{className:"ms-50",children:P(pe,{color:"info",onClick:()=>{alert("upload")},target:"_blank",size:"sm",children:[e(Jt,{size:16}),e("span",{className:"align-middle ms-25",children:"Upload"})]})})]}),xe=d.exports.useCallback(c=>{c.xlsx.writeBuffer().then(L=>{Dt(new Blob([L],{type:"application/octet-stream"}),`${v}.xlsx`)})},[v]),ye=d.exports.useCallback(c=>{const{permissions:L,columnCustomizer:D,columnResizingMode:F,columns:le,fixedColumns:ve,pageSizes:Ye,hiddenColumnNames:Xe,filterColumns:Qe}=c;z(L),me(D),w(F),M(le),b(ve),B(Ye),X(Xe),g(Qe)},[]),[ke,Je]=d.exports.useState({filter:!1,setting:!1}),ze=()=>Je({...ke,setting:!ke.setting}),Ke=c=>{O(c.selected)},Ze=()=>e(mn,{nextLabel:"",breakLabel:"...",previousLabel:"",pageRangeDisplayed:2,forcePage:E,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",nextLinkClassName:"page-link",pageLinkClassName:"page-link",breakLinkClassName:"page-link",previousLinkClassName:"page-link",nextClassName:"page-item next-item",previousClassName:"page-item prev-item",pageCount:k,onPageChange:Ke,containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1"});return P(it,{children:[P("div",{className:"d-flex justify-content-between",children:[e("div",{children:P(ot,{children:[e(Ie,{children:e(lt,{to:"/",children:" Home "})}),e(Ie,{active:!0,children:P("span",{children:[" ",v," "]})})]})}),e("div",{className:"d-flex align-items-center justify-content-end me-1 mb-1",children:e(pe.Ripple,{className:"btn-icon",color:"primary",onClick:ze,children:e(Ft,{size:16})})})]}),P(be,{className:"grid-table",children:[P(ft,{rows:N,columns:Y,children:[e(ht,{}),e(nn,{for:Y.filter(c=>c.isLink).map(c=>c.name)}),e(sn,{for:Y.filter(c=>c.isNumber).map(c=>c.name)}),t.length>0&&t.map((c,L)=>e(c,{},L)),e(vt,{selection:re,onSelectionChange:c=>ge(c)}),p&&e(bt,{}),K&&e(Ct,{totalItems:on(Y)}),K&&e(xt,{}),se&&e(yt,{}),e(kt,{height:Q?"40vh":"auto",columnExtensions:Y.filter(c=>c.align).map(c=>({columnName:c.name,align:c.align}))}),ie&&e(Nt,{order:u,onOrderChange:c=>f(c)}),e(Pt,{columnWidths:C,onColumnWidthsChange:h,resizingMode:n}),e(Lt,{showGroupingControls:W}),p&&e(wt,{contentComponent:p}),e(St,{hiddenColumnNames:$,onHiddenColumnNamesChange:c=>X(c)}),se&&e(Ot,{showSelectAll:!0,selectByRowClick:!0,highlightRow:!0}),W&&e(Et,{}),K&&N.length>0&&!Q&&e(Rt,{}),e(Tt,{}),e(jt,{columns:Y,filters:U,setFilters:c=>ee(c),filterColumns:V,entries:v}),ae&&e(At,{startExport:oe,toggleButtonComponent:Ce}),W&&e(_t,{showGroupingControls:!0}),e(zt,{leftColumns:m.left||[],rightColumns:m.right||[]})]}),ae&&e(It,{ref:q,rows:N,columns:i.length>0?i:Y,selection:re,onSave:xe}),(Q||l)&&e($t,{}),_&&e(ct,{children:P("div",{className:"d-flex justify-content-between align-item-center ",children:[e("div",{className:"mt-50",children:e(Ue,{className:"mx-50",type:"select",id:"rows-per-page",value:j,onChange:c=>I(+c.target.value),style:{width:"5rem"},children:H.map(c=>e("option",{value:c,children:c},c))})}),e("div",{children:Ze()})]})})]}),e(gn,{isOpen:ke.setting,close:ze,entries:v,config:{columns:a,fixedColumns:m,settings:y,hiddenColumnNames:$,filterColumns:V,columnOrders:u,permissions:x,columnCustomizer:ue,columnResizingMode:n,pageSizes:H},saveConfig:ye})]})};export{yn as G};
