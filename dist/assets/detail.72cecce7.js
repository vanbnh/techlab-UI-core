import{r as d,n as x,bi as N,e as u,a0 as m,P as y,j as a,t as b,a1 as C,bj as D,bd as S,be as T,z as w,b5 as E}from"./index.7e0b0f28.js";import{u as R,C as _,N as I}from"./NotFound.cbe17a9c.js";import{B as U}from"./skeleton.e749ceaa.js";import{C as h,c as j}from"./index.6f4bc3fd.js";import"./useQuery.18149dba.js";function O(){var e=d.exports.useRef(!1),t=d.exports.useCallback(function(){return e.current},[]);return d.exports.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}var A=function(e){e===void 0&&(e={});var t=d.exports.useState(e),n=t[0],s=t[1],c=d.exports.useCallback(function(o){s(function(i){return Object.assign({},i,o instanceof Function?o(i):o)})},[]);return[n,c]};const M=A;var P=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],s=0;s<e.rangeCount;s++)n.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(c){e.addRange(c)}),t&&t.focus()}},J=P,k={"text/plain":"Text","text/html":"Url",default:"Text"},L="Copy to clipboard: #{key}, Enter";function F(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function $(e,t){var n,s,c,o,i,r,p=!1;t||(t={}),n=t.debug||!1;try{c=J(),o=document.createRange(),i=document.getSelection(),r=document.createElement("span"),r.textContent=e,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",function(l){if(l.stopPropagation(),t.format)if(l.preventDefault(),typeof l.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var g=k[t.format]||k.default;window.clipboardData.setData(g,e)}else l.clipboardData.clearData(),l.clipboardData.setData(t.format,e);t.onCopy&&(l.preventDefault(),t.onCopy(l.clipboardData))}),document.body.appendChild(r),o.selectNodeContents(r),i.addRange(o);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");p=!0}catch(l){n&&console.error("unable to copy using execCommand: ",l),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),p=!0}catch(g){n&&console.error("unable to copy using clipboardData: ",g),n&&console.error("falling back to prompt"),s=F("message"in t?t.message:L),window.prompt(s,e)}}finally{i&&(typeof i.removeRange=="function"?i.removeRange(o):i.removeAllRanges()),r&&document.body.removeChild(r),c()}return p}var z=$,B=function(){var e=O(),t=M({value:void 0,error:void 0,noUserInteraction:!0}),n=t[0],s=t[1],c=d.exports.useCallback(function(o){if(!!e()){var i,r;try{if(typeof o!="string"&&typeof o!="number"){var p=new Error("Cannot copy typeof "+typeof o+" to clipboard, must be a string");s({value:o,error:p,noUserInteraction:!0});return}else if(o===""){var p=new Error("Cannot copy empty string to clipboard.");s({value:o,error:p,noUserInteraction:!0});return}r=o.toString(),i=z(r),s({value:r,error:void 0,noUserInteraction:i})}catch(f){s({value:r,error:f,noUserInteraction:i})}}},[]);return[n,c]};const H=B,v=({copied:e,setCopied:t,value:n})=>{const[s,c]=H(),{t:o}=x();return a(D,{children:a("button",{type:"button",onClick:()=>{c(n),t(),S.success("Copied to clipboard")},className:`cursor-pointer text-decoration-underline border-0 bg-transparent text-${e?"success":"info"}`,children:o(e?"Copied":"Copy")})})},K=({row:e})=>{const[t,n]=d.exports.useState(""),{t:s}=x(),c=Object.keys(e.task_input)||[],o=Object.keys(e.task_result)||[],i=e.task_errors||[];return d.exports.useEffect(()=>{N.highlightAll()},[]),u("div",{className:"row-detail",children:[c.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:s("Inputs")}),a(v,{value:JSON.stringify(e.task_input,null,2),title:"Inputs",copied:t==="input",setCopied:()=>n("input")})]}),a(C,{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(e.task_input,null,2)})})})]}),o.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:s("Results")}),a(v,{value:JSON.stringify(e.task_result,null,2),title:"Results",copied:t==="result",setCopied:()=>n("result")})]}),a(C,{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(e.task_result,null,2)})})})]}),i.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:s("Errors")}),a(v,{value:JSON.stringify(e.task_errors,null,2),title:"Errors",copied:t==="error",setCopied:()=>n("error")})]}),a(C,{children:e.task_errors.map(r=>a("div",{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(r,null,2)})})},r.content))})]})]})},W=()=>{const{id:e}=T(),{urls:t,keys:n,entries:s}=j,{data:c,isLoading:o,notFound:i}=R({columns:h,key:n.detail,url:t.detail}),r=E.monitoring.task_log.path;return(o||!c)&&!i?a(_,{rows:Object.keys(h).length}):u(w,{children:[a("div",{className:"mb-1",children:a(U,{data:{parentName:s,parentTo:r,activeName:i?e:c==null?void 0:c.task_id}})}),i?a(I,{id:e,to:r}):a(K,{row:c})]})};export{W as default};
