import{n as b,r as d,a3 as O,e as h,y as I,j as u,b8 as L,I as T,k as $,i as E}from"./index.6e116e97.js";import{u as F}from"./useQuery.8038cb5a.js";import{u as G,s as S}from"./NotFound.e83ad4c9.js";function X({keys:s,urls:m,columns:i}){const{t:x}=b(),{detail:f,setDetail:C,data:c,isLoading:l,notFound:k,versions:r}=G({columns:i,key:s.detail,url:m.detail}),[e,j]=d.exports.useState(0),[v,D]=d.exports.useState(!1),[w,g]=d.exports.useState(null),[N,V]=d.exports.useState(null),{data:a,isLoading:z}=F([s.version,e],async()=>await O.get(`${m.version}${e}/`).then(t=>t.data),{enabled:!!e}),y=x("Version ID");return d.exports.useEffect(()=>{r.length>0&&e&&D(r[0]!==e)},[r,e]),d.exports.useEffect(()=>{if(a!=null&&a.data){let t=S(a.data,i);t=Object.keys(t).reduce((o,n)=>(o[n]=t[n],o),{[y]:e}),C(t)}V(null),g(null)},[e,a]),{detail:f,versions:r,isLoading:l,notFound:k,isShowCompare:v,dataVersionCurrent:w,dataVersionCompare:N,isLoadingVersion:z,versionSelect:e,setVersionSelect:j,onSetDataVersionCompare:()=>{if(r.length>0&&e&&(a==null?void 0:a.data)&&c){let t=S(a.data,i,!0);t=Object.keys(t).reduce((n,p)=>(n[p]=t[p],{...n}),{[y]:e}),V(t);let o=S(c,i,!0);o=Object.keys(o).reduce((n,p)=>(n[p]=o[p],n),{[y]:String(r[0])}),g(o)}},onCancelCompare:()=>{j(r[0]),V(null),g(null)}}}const q=({versions:s,isShowCompare:m,onSetDataVersionCompare:i,onCancelCompare:x,versionSelect:f,setVersionSelect:C})=>{const{t:c}=b();return h("div",{className:"d-flex justify-content-end align-items-center",children:[m&&s.length>0&&h("div",{className:"d-flex gx-0 me-1",children:[h(I,{color:"relief-primary",className:"me-50",size:"sm",onClick:i,children:[c("Compare with")," ",s[0]]}),u(I.Ripple,{className:"btn-icon",size:"sm",outline:!0,color:"secondary",onClick:x,children:u(L,{size:16})})]}),u("div",{style:{maxWidth:"240px"},children:s.length>0&&h(T,{children:[u($,{children:c("version")}),u(E,{type:"select",name:"version",id:"version",value:f,onChange:l=>C(l.target.value),children:s.map(l=>u("option",{children:l},l))})]})})]})};export{q as V,X as u};
