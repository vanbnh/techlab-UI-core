import{o as v,r as d,H as O,I as L,e as h,W as I,j as u,aU as T,ay as $,az as E,Z as F}from"./index.76fd1bb9.js";import{u as G,s as S}from"./NotFound.f49d19b7.js";function Q({keys:n,urls:m,columns:i}){const{t:x}=v(),{detail:C,setDetail:f,data:c,isLoading:l,notFound:D,versions:r}=G({columns:i,key:n.detail,url:m.detail}),[e,j]=d.exports.useState(0),[b,k]=d.exports.useState(!1),[w,g]=d.exports.useState(null),[z,V]=d.exports.useState(null),{data:a,isLoading:N}=O([n.version,e],async()=>await L.get(`${m.version}${e}/`).then(t=>t.data),{enabled:!!e}),y=x("Version ID");return d.exports.useEffect(()=>{r.length>0&&e&&k(r[0]!==e)},[r,e]),d.exports.useEffect(()=>{if(a!=null&&a.data){let t=S(a.data,i);t=Object.keys(t).reduce((o,s)=>(o[s]=t[s],o),{[y]:e}),f(t)}V(null),g(null)},[e,a]),{detail:C,versions:r,isLoading:l,notFound:D,isShowCompare:b,dataVersionCurrent:w,dataVersionCompare:z,isLoadingVersion:N,versionSelect:e,setVersionSelect:j,onSetDataVersionCompare:()=>{if(r.length>0&&e&&(a==null?void 0:a.data)&&c){let t=S(a.data,i,!0);t=Object.keys(t).reduce((s,p)=>(s[p]=t[p],{...s}),{[y]:e}),V(t);let o=S(c,i,!0);o=Object.keys(o).reduce((s,p)=>(s[p]=o[p],s),{[y]:String(r[0])}),g(o)}},onCancelCompare:()=>{j(r[0]),V(null),g(null)}}}const R=({versions:n,isShowCompare:m,onSetDataVersionCompare:i,onCancelCompare:x,versionSelect:C,setVersionSelect:f})=>{const{t:c}=v();return h("div",{className:"d-flex justify-content-end align-items-center",children:[m&&n.length>0&&h("div",{className:"d-flex gx-0 me-1",children:[h(I,{color:"relief-primary",className:"me-50",size:"sm",onClick:i,children:[c("Compare with")," ",n[0]]}),u(I.Ripple,{className:"btn-icon",size:"sm",outline:!0,color:"secondary",onClick:x,children:u(T,{size:16})})]}),u("div",{style:{maxWidth:"240px"},children:n.length>0&&h($,{children:[u(E,{children:c("version")}),u(F,{type:"select",name:"version",id:"version",value:C,onChange:l=>f(l.target.value),children:n.map(l=>u("option",{children:l},l))})]})})]})};export{R as V,Q as u};
