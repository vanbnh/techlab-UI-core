import{r as d,bn as x,a as u,aq as m,an as y,j as a,aa as b,ar as C,bo as N,bj as D,bk as S,ag as w}from"./index.25262899.js";import{m as E}from"./App.ec46c1b1.js";import{u as T,C as R,B as _,N as I}from"./NotFound.5110d9b3.js";import{C as h,c as U}from"./index.af247cc6.js";import"./useQuery.1bfa0df2.js";function j(){var e=d.exports.useRef(!1),t=d.exports.useCallback(function(){return e.current},[]);return d.exports.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}var O=function(e){e===void 0&&(e={});var t=d.exports.useState(e),n=t[0],i=t[1],c=d.exports.useCallback(function(o){i(function(s){return Object.assign({},s,o instanceof Function?o(s):o)})},[]);return[n,c]};const A=O;var M=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(c){e.addRange(c)}),t&&t.focus()}},P=M,k={"text/plain":"Text","text/html":"Url",default:"Text"},J="Copy to clipboard: #{key}, Enter";function L(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function F(e,t){var n,i,c,o,s,r,p=!1;t||(t={}),n=t.debug||!1;try{c=P(),o=document.createRange(),s=document.getSelection(),r=document.createElement("span"),r.textContent=e,r.ariaHidden="true",r.style.all="unset",r.style.position="fixed",r.style.top=0,r.style.clip="rect(0, 0, 0, 0)",r.style.whiteSpace="pre",r.style.webkitUserSelect="text",r.style.MozUserSelect="text",r.style.msUserSelect="text",r.style.userSelect="text",r.addEventListener("copy",function(l){if(l.stopPropagation(),t.format)if(l.preventDefault(),typeof l.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var g=k[t.format]||k.default;window.clipboardData.setData(g,e)}else l.clipboardData.clearData(),l.clipboardData.setData(t.format,e);t.onCopy&&(l.preventDefault(),t.onCopy(l.clipboardData))}),document.body.appendChild(r),o.selectNodeContents(r),s.addRange(o);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");p=!0}catch(l){n&&console.error("unable to copy using execCommand: ",l),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),p=!0}catch(g){n&&console.error("unable to copy using clipboardData: ",g),n&&console.error("falling back to prompt"),i=L("message"in t?t.message:J),window.prompt(i,e)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(o):s.removeAllRanges()),r&&document.body.removeChild(r),c()}return p}var $=F,B=function(){var e=j(),t=A({value:void 0,error:void 0,noUserInteraction:!0}),n=t[0],i=t[1],c=d.exports.useCallback(function(o){if(!!e()){var s,r;try{if(typeof o!="string"&&typeof o!="number"){var p=new Error("Cannot copy typeof "+typeof o+" to clipboard, must be a string");i({value:o,error:p,noUserInteraction:!0});return}else if(o===""){var p=new Error("Cannot copy empty string to clipboard.");i({value:o,error:p,noUserInteraction:!0});return}r=o.toString(),s=$(r),i({value:r,error:void 0,noUserInteraction:s})}catch(f){i({value:r,error:f,noUserInteraction:s})}}},[]);return[n,c]};const z=B,v=({copied:e,setCopied:t,value:n,title:i})=>{const[c,o]=z();return a(N,{children:a("button",{type:"button",onClick:()=>{o(n),t(),D.success(`Copied ${i} to clipboard`)},className:`cursor-pointer text-decoration-underline border-0 bg-transparent text-${e?"success":"info"}`,children:e?"Copied":"Copy"})})},H=({row:e})=>{const[t,n]=d.exports.useState(""),i=Object.keys(e.task_input)||[],c=Object.keys(e.task_result)||[],o=e.task_errors||[];return d.exports.useEffect(()=>{x.highlightAll()},[]),u("div",{className:"row-detail",children:[i.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:"Inputs"}),a(v,{value:JSON.stringify(e.task_input,null,2),title:"Inputs",copied:t==="input",setCopied:()=>n("input")})]}),a(C,{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(e.task_input,null,2)})})})]}),c.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:"Results"}),a(v,{value:JSON.stringify(e.task_result,null,2),title:"Results",copied:t==="result",setCopied:()=>n("result")})]}),a(C,{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(e.task_result,null,2)})})})]}),o.length>0&&u(m,{className:"card-snippet",children:[u(y,{children:[a(b,{tag:"h4",children:"Error"}),a(v,{value:JSON.stringify(e.task_errors,null,2),title:"Errors",copied:t==="error",setCopied:()=>n("error")})]}),a(C,{children:e.task_errors.map(s=>a("div",{children:a("pre",{children:a("code",{className:"language-json",children:JSON.stringify(s,null,2)})})},s.content))})]})]})},Q=()=>{const{id:e}=S(),{urls:t,keys:n,entries:i}=U,{data:c,isLoading:o,notFound:s}=T({columns:h,key:n.detail,url:t.detail}),r=E.monitoring.task_log.path;return(o||!c)&&!s?a(R,{rows:Object.keys(h).length}):u(w,{children:[a("div",{className:"mb-1",children:a(_,{data:{parentName:i,parentTo:r,activeName:s?e:c==null?void 0:c.task_id}})}),s?a(I,{id:e,to:r}):a(H,{row:c})]})};export{Q as default};
